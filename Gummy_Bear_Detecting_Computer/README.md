For the final build and test, I implemented the following operational procedure. In the Main while(1) loop, we first continually check for a rising edge on the input pin to begin the testing. Then, the loop calls a service event function that services the event at the start of an event queue. This service event function calls the state machine function and passes the popped event as a parameter. The state machine then performs the necessary services associated with that event depending on the current state. As a general overview of the state machine start, we decided to begin in a wait state until that first rising edge was detected. 

Once a rising edge was detected which indicated the first LED went on for testing, two separate interrupt driven timers began. The second time had a cycle half in time length of the first one and when the second timer ran out, a measurement was taken by the phototransistor circuit. When the first timer ran out, the state machine would move onto lighting the next LED and resetting the two timers to begin the testing process again. This cycle repeated through the three timers and then ultimately, the gummy bear color first initial of R (red), O (orange), G (green), or C (clear) was printed to the serial monitor. The full code associated with this build can be found in the final code section of the appendix.

